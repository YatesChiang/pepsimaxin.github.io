<!DOCTYPE HTML>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta name="keywords" content="æ·±å…¥é’»ç ” Android æ ¸å¿ƒæœºåˆ¶ ä¹‹ äº‹ä»¶åˆ†å‘, Hexo">
    <meta name="description" content="1. æ ¸å¿ƒæºç 


å…³é”®ç±»
è·¯å¾„




Activity.java
frameworks/base/core/java/android/view/View.java


Window.java
frameworks/base/core/j">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>æ·±å…¥é’»ç ” Android æ ¸å¿ƒæœºåˆ¶ ä¹‹ äº‹ä»¶åˆ†å‘ | Hexo</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <!--<div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Hexo</span>
                </a>
            </div>-->
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>é¦–é¡µ</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>ç›®å½•</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>æ ‡ç­¾</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories/å››å¤§ç»„ä»¶/" class="waves-effect waves-light">
            
            <i class="fa fa-cube"></i>
            
            <span>ç»„ä»¶</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories/å¯åŠ¨é˜¶æ®µ/" class="waves-effect waves-light">
            
            <i class="fa fa-spinner"></i>
            
            <span>å¼€æœº</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories/æ¡†æ¶æœåŠ¡/" class="waves-effect waves-light">
            
            <i class="fa fa-superpowers"></i>
            
            <span>æ¡†æ¶</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories/æ ¸å¿ƒæœºåˆ¶/" class="waves-effect waves-light">
            
            <i class="fa fa-link"></i>
            
            <span>æœºåˆ¶</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories/æ€§èƒ½ä¼˜åŒ–/" class="waves-effect waves-light">
            
            <i class="fa fa-yelp"></i>
            
            <span>ä¼˜åŒ–</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories/è®¾è®¡æ¨¡å¼/" class="waves-effect waves-light">
            
            <i class="fa fa-envira"></i>
            
            <span>æ¨¡å¼</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories/ç®—æ³•ä¸“æ /" class="waves-effect waves-light">
            
            <i class="fa fa-modx"></i>
            
            <span>ç®—æ³•</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories/æŠ€æœ¯å‚¨å¤‡/" class="waves-effect waves-light">
            
            <i class="fa fa-linode"></i>
            
            <span>æ‹“å±•</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>ä½œè€…</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories/æŠ€æœ¯ç»†èŠ‚/" class="waves-effect waves-light">
            
            <i class="fa fa-file-text"></i>
            
            <span>FAQ</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="æ£€ç´¢åšæ–‡"></i>
        </a>
    </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Hexo</div>
        <div class="logo-desc">
            
            Victory belongs to the most persevering.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                é¦–é¡µ
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                ç›®å½•
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                æ ‡ç­¾
            </a>
        </li>
        
        <li>
            <a href="/categories/å››å¤§ç»„ä»¶/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-cube"></i>
                
                ç»„ä»¶
            </a>
        </li>
        
        <li>
            <a href="/categories/å¯åŠ¨é˜¶æ®µ/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-spinner"></i>
                
                å¼€æœº
            </a>
        </li>
        
        <li>
            <a href="/categories/æ¡†æ¶æœåŠ¡/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-superpowers"></i>
                
                æ¡†æ¶
            </a>
        </li>
        
        <li>
            <a href="/categories/æ ¸å¿ƒæœºåˆ¶/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-link"></i>
                
                æœºåˆ¶
            </a>
        </li>
        
        <li>
            <a href="/categories/æ€§èƒ½ä¼˜åŒ–/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-yelp"></i>
                
                ä¼˜åŒ–
            </a>
        </li>
        
        <li>
            <a href="/categories/è®¾è®¡æ¨¡å¼/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-envira"></i>
                
                æ¨¡å¼
            </a>
        </li>
        
        <li>
            <a href="/categories/ç®—æ³•ä¸“æ /" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-modx"></i>
                
                ç®—æ³•
            </a>
        </li>
        
        <li>
            <a href="/categories/æŠ€æœ¯å‚¨å¤‡/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-linode"></i>
                
                æ‹“å±•
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                ä½œè€…
            </a>
        </li>
        
        <li>
            <a href="/categories/æŠ€æœ¯ç»†èŠ‚/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-file-text"></i>
                
                FAQ
            </a>
        </li>
        
        
    </ul>
</div>

        </div>

        
    </nav>

</header>





<div class="bg-cover pd-header post-cover" style="background-image: url('http://poobjb5p7.bkt.clouddn.com/%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%EF%BC%88%E5%B0%81%E9%9D%A2%EF%BC%89.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        æ·±å…¥é’»ç ” Android æ ¸å¿ƒæœºåˆ¶ ä¹‹ äº‹ä»¶åˆ†å‘
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/äº‹ä»¶åˆ†å‘/" target="_blank">
                                <span class="chip bg-color">äº‹ä»¶åˆ†å‘</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/æ ¸å¿ƒæœºåˆ¶/" class="post-category" target="_blank">
                                æ ¸å¿ƒæœºåˆ¶
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>&nbsp;å‘å¸ƒæ—¥æœŸ :&nbsp;
                    2018-09-26
                </div>

                
                    
                    <div class="info-break-policy">
                        <i class="fa fa-file-word-o fa-fw"></i>&nbsp;æ–‡ç« å­—æ•° :&nbsp;
                        6.4k
                    </div>
                    

                    
                    <div class="info-break-policy">
                        <i class="fa fa-clock-o fa-fw"></i>&nbsp;é˜…è¯»æ—¶é•¿ :&nbsp;
                        28 åˆ†é’Ÿ
                    </div>
                    
                
				
				
            </div>
        </div>
		<br>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="1-æ ¸å¿ƒæºç "><a href="#1-æ ¸å¿ƒæºç " class="headerlink" title="1. æ ¸å¿ƒæºç "></a>1. æ ¸å¿ƒæºç </h1><table>
<thead>
<tr>
<th>å…³é”®ç±»</th>
<th>è·¯å¾„</th>
</tr>
</thead>
<tbody>
<tr>
<td><font color="#D15FEE">Activity.java</font></td>
<td>frameworks/base/core/java/android/view/View.java</td>
</tr>
<tr>
<td><font color="#D15FEE">Window.java</font></td>
<td>frameworks/base/core/java/android/view/Window.java</td>
</tr>
<tr>
<td><font color="#D15FEE">Activity.java</font></td>
<td>frameworks/base/core/java/android/app/Activity.java</td>
</tr>
<tr>
<td><font color="#D15FEE">ViewGroup.java</font></td>
<td>frameworks/base/core/core/java/android/view/ViewGroup.java</td>
</tr>
<tr>
<td><font color="#D15FEE">DecorView.java</font></td>
<td>frameworks/base/core/java/com/android/internal/policy/DecorView.java</td>
</tr>
</tbody>
</table>
<p><br></p>
<h1 id="2-åŸºç¡€è®¤çŸ¥"><a href="#2-åŸºç¡€è®¤çŸ¥" class="headerlink" title="2. åŸºç¡€è®¤çŸ¥"></a>2. åŸºç¡€è®¤çŸ¥</h1><p>Android <strong> â€œViewâ€</strong>  è™½ç„¶ä¸æ˜¯å››å¤§ç»„ä»¶ï¼Œä½†å…¶å¹¶ä¸æ¯”å››å¤§ç»„ä»¶çš„åœ°ä½ä½ã€‚è€Œ View çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹<strong><font color="#FF0000"> â€œäº‹ä»¶åˆ†å‘æœºåˆ¶â€ </font></strong>åˆ™æ˜¯ä¸å°‘åˆšå…¥é—¨ç«¥é‹çš„æ‹¦è·¯è™ï¼ˆ<strong>1ã€é¡¹ç›®ä¸­å¤„å¤„é‡åˆ°äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼›2ã€é¢è¯•ç®¡æœ€å–œæ¬¢æåŠçš„é—®é¢˜</strong>ï¼‰ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒScrollView åµŒå¥— RecyclerViewï¼ˆæˆ–è€… ListViewï¼‰çš„æ»‘åŠ¨å†²çªè¿™ç§è€å¤§éš¾é—®é¢˜çš„ç†è®ºåŸºç¡€å°±æ˜¯â€œäº‹ä»¶åˆ†å‘æœºåˆ¶â€ã€‚</p>
<p><strong>é¦–å…ˆï¼Œæˆ‘ä»¬äº†è§£ä¸€ä¸‹â€œäº‹ä»¶åˆ†å‘æœºåˆ¶â€ä¸­çš„åŸºç¡€çŸ¥è¯†ç‚¹ï¼</strong></p>
<h2 id="2-1-äº‹ä»¶åˆ†å‘çš„å¯¹è±¡"><a href="#2-1-äº‹ä»¶åˆ†å‘çš„å¯¹è±¡" class="headerlink" title="2.1 äº‹ä»¶åˆ†å‘çš„å¯¹è±¡"></a>2.1 äº‹ä»¶åˆ†å‘çš„å¯¹è±¡</h2><p>äº‹ä»¶åˆ†å‘çš„å¯¹è±¡ï¼š<strong><font color="#0000FF">ç‚¹å‡»äº‹ä»¶ï¼ˆTouchäº‹ä»¶ï¼‰</font></strong></p>
<p><strong>1. å®šä¹‰</strong></p>
<p>å½“ç”¨æˆ·è§¦æ‘¸å±å¹•æ—¶ï¼ˆView æˆ– ViewGroup æ´¾ç”Ÿçš„æ§ä»¶ï¼‰ï¼Œå°†äº§ç”Ÿç‚¹å‡»äº‹ä»¶ï¼ˆTouchäº‹ä»¶ï¼‰</p>
<blockquote>
<p>Touch äº‹ä»¶çš„ç›¸å…³ç»†èŠ‚ï¼ˆå‘ç”Ÿè§¦æ‘¸çš„ä½ç½®ã€æ—¶é—´ç­‰ï¼‰è¢«å°è£…æˆ MotionEvent å¯¹è±¡</p>
</blockquote>
<p><strong>2. äº‹ä»¶ç±»å‹</strong></p>
<table>
<thead>
<tr>
<th>äº‹ä»¶ç±»å‹</th>
<th>å…·ä½“åŠ¨ä½œ</th>
</tr>
</thead>
<tbody>
<tr>
<td>MotionEvent.ACTION_DOWN</td>
<td>æŒ‰ä¸‹ Viewï¼ˆæ‰€æœ‰äº‹ä»¶çš„å¼€å§‹ï¼‰</td>
</tr>
<tr>
<td>MotionEvent.ACTION_UP</td>
<td>æŠ¬èµ· Viewï¼ˆä¸DOWNå¯¹åº”ï¼‰</td>
</tr>
<tr>
<td>MotionEvent.ACTION_MOVE</td>
<td>æ»‘åŠ¨ View</td>
</tr>
<tr>
<td>MotionEvent.ACTION_CANCEL</td>
<td>ç»“æŸäº‹ä»¶ï¼ˆéäººä¸ºåŸå› ï¼‰</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>3. äº‹ä»¶åºåˆ—</strong></p>
<p>æ‰€è°“äº‹ä»¶åºåˆ—å°±æ˜¯æŒ‡ï¼šä»æ‰‹æŒ‡æ¥è§¦å±å¹•è‡³æ‰‹æŒ‡ç¦»å¼€å±å¹•ï¼Œè¿™ä¸ªè¿‡ç¨‹äº§ç”Ÿçš„ä¸€ç³»åˆ—äº‹ä»¶ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ<font color="#FF0000">äº‹ä»¶åˆ—éƒ½æ˜¯ä»¥ DOWN äº‹ä»¶å¼€å§‹ã€UP äº‹ä»¶ç»“æŸï¼Œä¸­é—´æœ‰æ— æ•°çš„ MOVE äº‹ä»¶</font>ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<center><img src="https://upload-images.jianshu.io/upload_images/3517194-3bd69415acb30024.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="äº‹ä»¶åˆ—.png"></center>

<p>å³å½“ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼ˆMotionEvent ï¼‰äº§ç”Ÿåï¼Œç³»ç»Ÿéœ€æŠŠè¿™ä¸ªäº‹ä»¶ä¼ é€’ç»™ä¸€ä¸ªå…·ä½“çš„ View å»å¤„ç†ã€‚</p>
<h2 id="2-2-äº‹ä»¶åˆ†å‘çš„æœ¬è´¨"><a href="#2-2-äº‹ä»¶åˆ†å‘çš„æœ¬è´¨" class="headerlink" title="2.2 äº‹ä»¶åˆ†å‘çš„æœ¬è´¨"></a>2.2 äº‹ä»¶åˆ†å‘çš„æœ¬è´¨</h2><p><strong><font color="#FF0000" size="4">æœ¬è´¨ï¼š</font></strong> å°†ç‚¹å‡»äº‹ä»¶ï¼ˆMotionEventï¼‰ä¼ é€’åˆ°æŸä¸ªå…·ä½“çš„ View å¹¶å¤„ç†çš„æ•´ä¸ªè¿‡ç¨‹ã€‚ </p>
<blockquote>
<p>å³ï¼šäº‹ä»¶ä¼ é€’çš„è¿‡ç¨‹ = åˆ†å‘è¿‡ç¨‹</p>
</blockquote>
<h2 id="2-3-äº‹ä»¶åˆ†å‘çš„å¯¹è±¡"><a href="#2-3-äº‹ä»¶åˆ†å‘çš„å¯¹è±¡" class="headerlink" title="2.3 äº‹ä»¶åˆ†å‘çš„å¯¹è±¡"></a>2.3 äº‹ä»¶åˆ†å‘çš„å¯¹è±¡</h2><p><strong><font color="#FF0000" size="4">å¯¹è±¡ï¼š</font></strong> Activityã€ViewGroupã€View </p>
<blockquote>
<p>Android çš„ UI ç•Œé¢ç”± Activityã€ViewGroupã€View åŠå…¶æ´¾ç”Ÿç±»ç»„æˆã€‚</p>
</blockquote>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<center><img src="https://upload-images.jianshu.io/upload_images/3517194-b8a64e07cc1ff705.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000" alt="UI ç•Œé¢.png"></center>

<h2 id="2-4-äº‹ä»¶åˆ†å‘çš„é¡ºåº"><a href="#2-4-äº‹ä»¶åˆ†å‘çš„é¡ºåº" class="headerlink" title="2.4 äº‹ä»¶åˆ†å‘çš„é¡ºåº"></a>2.4 äº‹ä»¶åˆ†å‘çš„é¡ºåº</h2><p><strong><font color="#FF0000" size="4">é¡ºåºï¼š</font></strong> Activity -&gt; ViewGroup -&gt; View </p>
<blockquote>
<p>å³ï¼š1ä¸ªç‚¹å‡»äº‹ä»¶å‘ç”Ÿåï¼Œäº‹ä»¶å…ˆä¼ åˆ° Activityã€å†ä¼ åˆ° ViewGroupã€æœ€ç»ˆå†ä¼ åˆ° Viewã€‚</p>
</blockquote>
<p>äº‹ä»¶åˆ†å‘çš„é¡ºåºæµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<center><img src="https://upload-images.jianshu.io/upload_images/3517194-f9c8101c57333075.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ä¼ é€’.png"></center>

<h2 id="2-5-äº‹ä»¶åˆ†å‘çš„æ–¹æ³•"><a href="#2-5-äº‹ä»¶åˆ†å‘çš„æ–¹æ³•" class="headerlink" title="2.5 äº‹ä»¶åˆ†å‘çš„æ–¹æ³•"></a>2.5 äº‹ä»¶åˆ†å‘çš„æ–¹æ³•</h2><p><strong><font color="#FF0000" size="4">ä¸‰ä¸ªé‡è¦æ–¹æ³•ï¼š</font></strong> dispatchTouchEvent() ã€onInterceptTouchEvent() å’Œ onTouchEvent()ã€‚</p>
<blockquote>
<p><strong><font color="#0000FF">dispatchTouchEventï¼ˆäº‹ä»¶åˆ†å‘ï¼‰ï¼š</font></strong>å½“ç›‘å¬åˆ°æœ‰è§¦å‘äº‹ä»¶æ—¶ï¼Œé¦–å…ˆç”± Activity è¿›è¡Œæ•è·ï¼Œç„¶åäº‹ä»¶å°±è¿›å…¥äº‹ä»¶åˆ†å‘çš„æµç¨‹ã€‚Activity æœ¬èº«æ²¡æœ‰äº‹ä»¶æ‹¦æˆªï¼Œä»è€Œå°†äº‹ä»¶ä¼ é€’ç»™æœ€å¤–å±‚çš„ View çš„ dispatchTouchEvent(MotionEvent ev) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å¯¹äº‹ä»¶è¿›è¡Œåˆ†å‘ã€‚</p>
</blockquote>
<p><strong>è¿”å›å€¼ï¼š</strong>è¡¨ç¤ºæ˜¯å¦æ¶ˆè´¹äº†å½“å‰äº‹ä»¶ã€‚å¯èƒ½æ˜¯ View æœ¬èº«çš„ onTouchEvent æ–¹æ³•æ¶ˆè´¹ï¼Œä¹Ÿå¯èƒ½æ˜¯å­ View çš„ dispatchTouchEvent æ–¹æ³•ä¸­æ¶ˆè´¹ã€‚è¿”å› true è¡¨ç¤ºäº‹ä»¶è¢«æ¶ˆè´¹ï¼Œæœ¬æ¬¡çš„äº‹ä»¶ç»ˆæ­¢ã€‚è¿”å› false è¡¨ç¤º View ä»¥åŠå­ View å‡æ²¡æœ‰æ¶ˆè´¹äº‹ä»¶ï¼Œå°†è°ƒç”¨çˆ¶ View çš„ onTouchEvent æ–¹æ³•ã€‚</p>
<blockquote>
<p><strong><font color="#0000FF">onInterceptTouchEventï¼ˆäº‹ä»¶æ‹¦æˆªï¼‰ï¼š</font></strong>å½“ä¸€ä¸ª ViewGroup åœ¨æ¥åˆ° MotionEvent äº‹ä»¶åºåˆ—æ—¶å€™ï¼Œé¦–å…ˆä¼šè°ƒç”¨æ­¤æ–¹æ³•åˆ¤æ–­æ˜¯å¦éœ€è¦æ‹¦æˆªã€‚ç‰¹åˆ«æ³¨æ„ï¼Œè¿™æ˜¯ ViewGroup ç‰¹æœ‰çš„æ–¹æ³•ï¼ŒView å¹¶æ²¡æœ‰æ‹¦æˆªæ–¹æ³•ã€‚</p>
</blockquote>
<p><strong>è¿”å›å€¼ï¼š</strong>æ˜¯å¦æ‹¦æˆªäº‹ä»¶ä¼ é€’ï¼Œè¿”å› true è¡¨ç¤ºæ‹¦æˆªäº†äº‹ä»¶ï¼Œé‚£ä¹ˆäº‹ä»¶å°†ä¸å†å‘ä¸‹åˆ†å‘è€Œæ˜¯è°ƒç”¨ View æœ¬èº«çš„ onTouchEvent æ–¹æ³•ã€‚è¿”å› false è¡¨ç¤ºä¸åšæ‹¦æˆªï¼Œäº‹ä»¶å°†å‘ä¸‹åˆ†å‘åˆ°å­ View çš„ dispatchTouchEvent æ–¹æ³•ã€‚</p>
<blockquote>
<p><strong><font color="#0000FF">onTouchEventï¼ˆäº‹ä»¶å“åº”ï¼‰ï¼š</font></strong>çœŸæ­£å¯¹ MotionEvent è¿›è¡Œå¤„ç†æˆ–è€…è¯´æ¶ˆè´¹çš„æ–¹æ³•ï¼Œåœ¨ dispatchTouchEvent æ–¹æ³•ä¸­è¿›è¡Œè°ƒç”¨ã€‚</p>
</blockquote>
<p><strong>è¿”å›å€¼ï¼š</strong>è¿”å› true è¡¨ç¤ºäº‹ä»¶è¢«æ¶ˆè´¹ï¼Œæœ¬æ¬¡çš„äº‹ä»¶ç»ˆæ­¢ã€‚è¿”å› false è¡¨ç¤ºäº‹ä»¶æ²¡æœ‰è¢«æ¶ˆè´¹ï¼Œå°†è°ƒç”¨çˆ¶ View çš„ onTouchEvent æ–¹æ³•ï¼Œç›´åˆ°è¿”å› true ä¸ºæ­¢ã€‚</p>
<center><img src="https://upload-images.jianshu.io/upload_images/3517194-13579e321d5f0f4c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="method.png"></center>

<h1 id="3-æºç åˆ†æ"><a href="#3-æºç åˆ†æ" class="headerlink" title="3. æºç åˆ†æ"></a>3. æºç åˆ†æ</h1><p>è¿˜è®°å¾—æˆ‘ä»¬ä¸ŠèŠ‚è¯´åˆ°çš„äº‹ä»¶åˆ†å‘çš„ <strong><font color="#FF0000">ä¼ é€’é¡ºåº</font></strong> å—ï¼Ÿ</p>
<blockquote>
<p>å³ï¼š1ä¸ªç‚¹å‡»äº‹ä»¶å‘ç”Ÿåï¼Œäº‹ä»¶å…ˆä¼ åˆ° Activityã€å†ä¼ åˆ° ViewGroupã€æœ€ç»ˆå†ä¼ åˆ° Viewã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œè¦æƒ³å……åˆ†ç†è§£ Android äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Œæœ¬è´¨ä¸Šæ˜¯è¦ç†è§£ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ğŸ’¥ <strong><font color="#0000FF">Activity å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶</font></strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ğŸ’¥ <strong><font color="#0000FF">ViewGroup å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶</font></strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ğŸ’¥ <strong><font color="#0000FF">View å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶</font></strong><br><br></p>
<h2 id="3-1-Activity-å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶"><a href="#3-1-Activity-å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶" class="headerlink" title="3.1 Activity å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶"></a>3.1 Activity å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶</h2><p>å½“ä¸€ä¸ªç‚¹å‡»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œäº‹ä»¶æœ€å…ˆä¼ åˆ° Activity çš„ dispatchTouchEvent() è¿›è¡Œäº‹ä»¶åˆ†å‘ã€‚</p>
<h3 id="3-1-1-dispatchTouchEvent"><a href="#3-1-1-dispatchTouchEvent" class="headerlink" title="3.1.1 dispatchTouchEvent"></a>3.1.1 dispatchTouchEvent</h3><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">dispatchTouchEvent</span><span class="token punctuation">(</span>MotionEvent ev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// ä¸€èˆ¬äº‹ä»¶åˆ—å¼€å§‹éƒ½æ˜¯ DOWN äº‹ä»¶ = æŒ‰ä¸‹äº‹ä»¶ï¼Œæ•…æ­¤å¤„åŸºæœ¬æ˜¯ true</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_DOWN<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">onUserInteraction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">/*
         * è‹¥ getWindow().superDispatchTouchEvent(ev) çš„è¿”å› trueï¼Œåˆ™ Activity.dispatchTouchEventï¼ˆï¼‰å°±è¿”å› trueï¼Œæ–¹æ³•ç»“æŸã€‚
         * å³ ï¼šè¯¥ç‚¹å‡»äº‹ä»¶åœæ­¢å¾€ä¸‹ä¼ é€’ &amp; äº‹ä»¶ä¼ é€’è¿‡ç¨‹ç»“æŸï¼Œå¦åˆ™ï¼šç»§ç»­å¾€ä¸‹è°ƒç”¨Activity.onTouchEventã€‚
         */</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">superDispatchTouchEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token function">onTouchEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<p>ä¸åŒçš„åˆ¤æ–­æ¡ä»¶ä¸‹ä¼šæ‰§è¡Œä¸åŒçš„å‡½æ•°ï¼Œæ·±å…¥äº†è§£åŸç†çš„è¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»§ç»­è¿½è¸ªè¿™äº›é‡ç‚¹å‡½æ•°ã€‚</p>
<h3 id="3-1-2-onUserInteraction"><a href="#3-1-2-onUserInteraction" class="headerlink" title="3.1.2 onUserInteraction"></a>3.1.2 onUserInteraction</h3><pre class=" language-java"><code class="language-java">   <span class="token comment" spellcheck="true">/**
    * è¯´æ˜ï¼š
    *    a. è¯¥æ–¹æ³•ä¸ºç©ºæ–¹æ³•ï¼Œä¸»è¦å®ç°å±ä¿åŠŸèƒ½
    *    b. å½“æ­¤ activity åœ¨æ ˆé¡¶æ—¶ï¼Œè§¦å±ç‚¹å‡»æŒ‰ homeï¼Œbackï¼Œmenu é”®ç­‰éƒ½ä¼šè§¦å‘æ­¤æ–¹æ³•
    */</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onUserInteraction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="3-1-3-superDispatchTouchEvent"><a href="#3-1-3-superDispatchTouchEvent" class="headerlink" title="3.1.3 superDispatchTouchEvent"></a>3.1.3 superDispatchTouchEvent</h3><pre class=" language-java"><code class="language-java">  <span class="token comment" spellcheck="true">/**
    * è¯´æ˜ï¼š
    *     a. getWindow()ï¼š è·å– Window ç±»çš„å¯¹è±¡
    *     b. Window ç±»æ˜¯æŠ½è±¡ç±»ï¼Œå…¶å”¯ä¸€å®ç°ç±»æ˜¯ PhoneWindow ç±»ï¼›å³æ­¤å¤„çš„ Window ç±»å¯¹è±¡ = PhoneWindow ç±»å¯¹è±¡
    *     c. Window ç±»çš„ superDispatchTouchEvent() æ˜¯1ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±» PhoneWindow ç±»å®ç°
    */</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">superDispatchTouchEvent</span><span class="token punctuation">(</span>MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mDecor<span class="token punctuation">.</span><span class="token function">superDispatchTouchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// mDecor = é¡¶å±‚ Viewï¼ˆDecorViewï¼‰çš„å®ä¾‹å¯¹è±¡</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="3-1-4-DecorView"><a href="#3-1-4-DecorView" class="headerlink" title="3.1.4 DecorView"></a>3.1.4 DecorView</h3><pre class=" language-java"><code class="language-java">  <span class="token comment" spellcheck="true">/**
    * å®šä¹‰ï¼šå±äºé¡¶å±‚ Viewï¼ˆDecorViewï¼‰
    * è¯´æ˜ï¼š
    *     a. DecorView ç±»æ˜¯ PhoneWindow ç±»çš„ä¸€ä¸ªå†…éƒ¨ç±»
    *     b. public class DecorView extends FrameLayoutï¼ŒDecorView ç»§æ‰¿è‡ª FrameLayoutï¼Œæ˜¯æ‰€æœ‰ç•Œé¢çš„çˆ¶ç±»           
    *     c. public class FrameLayout extends ViewGroupï¼ŒFrameLayout æ˜¯ ViewGroup çš„å­ç±»ï¼Œæ•… DecorView çš„é—´æ¥çˆ¶ç±»æ˜¯ ViewGroup
    */</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">superDispatchTouchEvent</span><span class="token punctuation">(</span>MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼šViewGroup çš„ dispatchTouchEvent()</span>
        <span class="token comment" spellcheck="true">// å³ï¼šå°†äº‹ä»¶ä¼ é€’åˆ° ViewGroup å»å¤„ç†ï¼Œè¯¦ç»†çš„æˆ‘ä»¬åœ¨ ViewGroup çš„äº‹ä»¶åˆ†å‘æœºåˆ¶ç»§ç»­è®¨è®º</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispatchTouchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="3-1-5-onTouchEvent"><a href="#3-1-5-onTouchEvent" class="headerlink" title="3.1.5 onTouchEvent"></a>3.1.5 onTouchEvent</h3><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onTouchEvent</span><span class="token punctuation">(</span>MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// å½“ä¸€ä¸ªç‚¹å‡»äº‹ä»¶æœªè¢« Activity ä¸‹ä»»ä½•ä¸€ä¸ª View æ¥æ”¶/å¤„ç†æ—¶</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mWindow<span class="token punctuation">.</span><span class="token function">shouldCloseOnTouch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">// åªæœ‰åœ¨ç‚¹å‡»äº‹ä»¶åœ¨ Window è¾¹ç•Œå¤–æ‰ä¼šè¿”å› trueï¼Œä¸€èˆ¬æƒ…å†µéƒ½è¿”å› false</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="3-1-6-shouldCloseOnTouch"><a href="#3-1-6-shouldCloseOnTouch" class="headerlink" title="3.1.6 shouldCloseOnTouch"></a>3.1.6 shouldCloseOnTouch</h3><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">/** @hide */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldCloseOnTouch</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// ä¸»è¦æ˜¯å¯¹äºå¤„ç†è¾¹ç•Œå¤–ç‚¹å‡»äº‹ä»¶çš„åˆ¤æ–­ï¼šæ˜¯å¦æ˜¯ DOWN äº‹ä»¶ï¼Œevent çš„åæ ‡æ˜¯å¦åœ¨è¾¹ç•Œå†…ç­‰</span>
        <span class="token keyword">final</span> <span class="token keyword">boolean</span> isOutside <span class="token operator">=</span>
                event<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_DOWN <span class="token operator">&amp;&amp;</span> <span class="token function">isOutOfBounds</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> event<span class="token punctuation">)</span>
                <span class="token operator">||</span> event<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_OUTSIDE<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// è¿”å›trueï¼šè¯´æ˜äº‹ä»¶åœ¨è¾¹ç•Œå¤–ï¼Œå³ æ¶ˆè´¹äº‹ä»¶</span>
        <span class="token comment" spellcheck="true">// è¿”å›falseï¼šæœªæ¶ˆè´¹ï¼ˆé»˜è®¤ï¼‰</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mCloseOnTouchOutside <span class="token operator">&amp;&amp;</span> <span class="token function">peekDecorView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> isOutside<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="3-1-7-æ€»ç»“"><a href="#3-1-7-æ€»ç»“" class="headerlink" title="3.1.7 æ€»ç»“"></a>3.1.7 æ€»ç»“</h3><center><img src="https://upload-images.jianshu.io/upload_images/3517194-09f4ddd079792c82.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Activity.png"></center>

<p>è‡³æ­¤ï¼Œæˆ‘ä»¬åˆ†æäº† Activity å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶å¤„ç†æµç¨‹ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼ŒActivity çš„äº‹ä»¶èµ°åˆ°äº† ViewGroup è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯åˆ†æ ViewGroup å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶äº†ã€‚</p>
<h2 id="3-2-ViewGroup-å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶"><a href="#3-2-ViewGroup-å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶" class="headerlink" title="3.2 ViewGroup å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶"></a>3.2 ViewGroup å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶</h2><p>ä»ä¸Šé¢ Activity äº‹ä»¶åˆ†å‘æœºåˆ¶å¯çŸ¥ï¼ŒViewGroup äº‹ä»¶åˆ†å‘æœºåˆ¶ä» dispatchTouchEvent() å¼€å§‹ã€‚</p>
<h3 id="3-2-1-dispatchTouchEvent"><a href="#3-2-1-dispatchTouchEvent" class="headerlink" title="3.2.1 dispatchTouchEvent"></a>3.2.1 dispatchTouchEvent</h3><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">dispatchTouchEvent</span><span class="token punctuation">(</span>MotionEvent ev<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token comment" spellcheck="true">// åˆ†æå…³é”®ä»£ç </span>

        <span class="token keyword">boolean</span> handled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// è¿™ä¸ªå˜é‡ç”¨äºè®°å½•äº‹ä»¶æ˜¯å¦è¢«å¤„ç†å®Œ</span>

        <span class="token comment" spellcheck="true">// è¿‡æ»¤æ‰ä¸€äº›ä¸åˆæ³•çš„äº‹ä»¶</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">onFilterTouchEventForSecurity</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">final</span> <span class="token keyword">int</span> action <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">final</span> <span class="token keyword">int</span> actionMasked <span class="token operator">=</span> action <span class="token operator">&amp;</span> MotionEvent<span class="token punctuation">.</span>ACTION_MASK<span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// åˆ¤æ–­æ˜¯ä¸æ˜¯ Down äº‹ä»¶ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°±è¦åšåˆå§‹åŒ–æ“ä½œ</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>actionMasked <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_DOWN<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token comment" spellcheck="true">/* 
                * å¦‚æœæ˜¯ Down äº‹ä»¶ï¼Œå°±è¦æ¸…ç©ºæ‰ä¹‹å‰çš„çŠ¶æ€ï¼Œ
                * æ¯”å¦‚ï¼šä¹‹å‰åœ¨åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªå•ç‚¹çš„æ»‘åŠ¨ï¼Œä½†æ˜¯ç¬¬äºŒä¸ª Down æ¥äº†ï¼Œå°±è¡¨ç¤ºä¸å¯èƒ½æ˜¯å•ç‚¹çš„æ»‘åŠ¨ï¼Œ
                * è¦é‡æ–°å¼€å§‹åˆ¤æ–­è§¦æ‘¸çš„æ‰‹åŠ¿ï¼Œæ¸…ç©ºæ‰ mFirstTouchTarget
                */</span>
                <span class="token function">cancelAndClearTouchTargets</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">resetTouchState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// mFirstTouchTarget = null;</span>
            <span class="token punctuation">}</span>


            <span class="token comment" spellcheck="true">// Check for interceptionï¼Œæ£€æŸ¥æ˜¯å¦æ‹¦æˆªäº‹ä»¶ã€‚</span>
            <span class="token keyword">final</span> <span class="token keyword">boolean</span> intercepted<span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">// å¦‚æœå½“å‰æ˜¯ Down äº‹ä»¶ï¼Œæˆ–è€…å·²ç»æœ‰å¤„ç† Touch äº‹ä»¶çš„ç›®æ ‡äº†</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>actionMasked <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_DOWN <span class="token operator">||</span> mFirstTouchTarget <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">/*
                 * disallowInterceptï¼šæ˜¯å¦ç¦ç”¨äº‹ä»¶æ‹¦æˆªçš„åŠŸèƒ½(é»˜è®¤æ˜¯ false)
                 * å¯é€šè¿‡è°ƒç”¨ requestDisallowInterceptTouchEvent() ä¿®æ”¹
                 * ä½¿ç”¨ä¸è¿ç®—ä½œä¸ºåˆ¤æ–­ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ flag ä¸­ï¼Œå­˜å‚¨å¥½å‡ ä¸ªæ ‡å¿—
                 */</span>
                <span class="token keyword">final</span> <span class="token keyword">boolean</span> disallowIntercept <span class="token operator">=</span> <span class="token punctuation">(</span>mGroupFlags <span class="token operator">&amp;</span> FLAG_DISALLOW_INTERCEPT<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>disallowIntercept<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment" spellcheck="true">// ViewGroup æ¯æ¬¡äº‹ä»¶åˆ†å‘æ—¶ï¼Œéƒ½éœ€è°ƒç”¨ onInterceptTouchEvent() è¯¢é—®æ˜¯å¦æ‹¦æˆªäº‹ä»¶</span>
                    intercepted <span class="token operator">=</span> <span class="token function">onInterceptTouchEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                    <span class="token comment" spellcheck="true">// é‡æ–°æ¢å¤ Actionï¼Œä»¥å… Action åœ¨ä¸Šé¢çš„æ­¥éª¤è¢«äººä¸ºåœ°æ”¹å˜äº†</span>
                    ev<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// restore action in case it was changed</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    intercepted <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">// å¦‚æœè¯´ï¼Œäº‹ä»¶å·²ç»åˆå§‹åŒ–è¿‡äº†ï¼Œå¹¶ä¸”æ²¡æœ‰å­ View è¢«åˆ†é…å¤„ç†ï¼Œé‚£ä¹ˆå°±è¯´æ˜ï¼Œè¿™ä¸ª ViewGroup å·²ç»æ‹¦æˆªäº†è¿™ä¸ªäº‹ä»¶</span>
                intercepted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>intercepted <span class="token operator">||</span> mFirstTouchTarget <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ev<span class="token punctuation">.</span><span class="token function">setTargetAccessibilityFocus</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment" spellcheck="true">// Check for cancelationï¼Œæ ‡å¿—ç€å–æ¶ˆäº‹ä»¶.</span>
            <span class="token keyword">final</span> <span class="token keyword">boolean</span> canceled <span class="token operator">=</span> <span class="token function">resetCancelNextUpFlag</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">||</span> actionMasked <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_CANCEL<span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// å¦‚æœéœ€è¦ï¼ˆä¸æ˜¯å–æ¶ˆï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹¦æˆªï¼‰çš„è¯ï¼Œé‚£ä¹ˆåœ¨è§¦æ‘¸ Down äº‹ä»¶çš„æ—¶å€™æ›´æ–°è§¦æ‘¸ç›®æ ‡åˆ—è¡¨</span>
            <span class="token comment" spellcheck="true">// splitï¼šä»£è¡¨å½“å‰çš„ ViewGroup æ˜¯ä¸æ˜¯æ”¯æŒåˆ†å‰² MotionEvent åˆ°ä¸åŒçš„ View å½“ä¸­</span>
            <span class="token keyword">final</span> <span class="token keyword">boolean</span> split <span class="token operator">=</span> <span class="token punctuation">(</span>mGroupFlags <span class="token operator">&amp;</span> FLAG_SPLIT_MOTION_EVENTS<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">// æ–°çš„è§¦æ‘¸å¯¹è±¡</span>
            TouchTarget newTouchTarget <span class="token operator">=</span> null<span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//æ˜¯å¦æŠŠäº‹ä»¶åˆ†é…ç»™äº†æ–°çš„è§¦æ‘¸</span>
            <span class="token keyword">boolean</span> alreadyDispatchedToNewTouchTarget <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

            ğŸ’¥ ğŸ’¥ ğŸ’¥ ğŸ’¥ ğŸ’¥ ğŸ’¥ ğŸ’¥ ğŸ’¥ é‡ç‚¹æ–¹æ³• ğŸ’¥ ğŸ’¥ ğŸ’¥ ğŸ’¥ ğŸ’¥ ğŸ’¥ ğŸ’¥ ğŸ’¥
            <span class="token comment" spellcheck="true">// å¦‚æœäº‹ä»¶ä¸æ˜¯å–æ¶ˆäº‹ä»¶ï¼Œä¹Ÿæ²¡æœ‰æ‹¦æˆªï¼Œé‚£ä¹ˆè¿›å…¥æ­¤å‡½æ•°</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canceled <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>intercepted<span class="token punctuation">)</span> <span class="token punctuation">{</span>      

                View childWithAccessibilityFocus <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token function">isTargetAccessibilityFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token operator">?</span> <span class="token function">findChildWithAccessibilityFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> null<span class="token punctuation">;</span>

                <span class="token comment" spellcheck="true">/*
                 * å¦‚æœæ˜¯ä¸ªå…¨æ–°çš„ Down äº‹ä»¶
                 * æˆ–è€…æ˜¯æœ‰æ–°çš„è§¦æ‘¸ç‚¹
                 * æˆ–è€…æ˜¯å…‰æ ‡æ¥å›ç§»åŠ¨äº‹ä»¶ï¼ˆä¸å¤ªæ˜ç™½ä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼‰
                 */</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>actionMasked <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_DOWN
                        <span class="token operator">||</span> <span class="token punctuation">(</span>split <span class="token operator">&amp;&amp;</span> actionMasked <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_POINTER_DOWN<span class="token punctuation">)</span>
                        <span class="token operator">||</span> actionMasked <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_HOVER_MOVE<span class="token punctuation">)</span> <span class="token punctuation">{</span>

                    <span class="token comment" spellcheck="true">// äº‹ä»¶çš„ç´¢å¼•ï¼ŒDown äº‹ä»¶çš„ indexï¼š0</span>
                    <span class="token keyword">final</span> <span class="token keyword">int</span> actionIndex <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token function">getActionIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// always 0 for down</span>

                    <span class="token comment" spellcheck="true">// è·å–åˆ†é…çš„ ID çš„ bit æ•°é‡</span>
                    <span class="token keyword">final</span> <span class="token keyword">int</span> idBitsToAssign <span class="token operator">=</span> split <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> ev<span class="token punctuation">.</span><span class="token function">getPointerId</span><span class="token punctuation">(</span>actionIndex<span class="token punctuation">)</span>
                            <span class="token operator">:</span> TouchTarget<span class="token punctuation">.</span>ALL_POINTER_IDS<span class="token punctuation">;</span>

                    <span class="token comment" spellcheck="true">// æ¸…ç†ä¹‹å‰è§¦æ‘¸è¿™ä¸ªæŒ‡é’ˆæ ‡è¯†ï¼Œä»¥é˜²å®ƒä»¬çš„ç›®æ ‡å˜å¾—ä¸åŒæ­¥</span>
                    <span class="token function">removePointersFromTouchTargets</span><span class="token punctuation">(</span>idBitsToAssign<span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token keyword">final</span> <span class="token keyword">int</span> childrenCount <span class="token operator">=</span> mChildrenCount<span class="token punctuation">;</span>

                    <span class="token comment" spellcheck="true">// å¦‚æœæ–°çš„è§¦æ‘¸å¯¹è±¡ä¸º null &amp; å½“å‰ ViewGroup æœ‰å­å…ƒç´ </span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>newTouchTarget <span class="token operator">==</span> null <span class="token operator">&amp;&amp;</span> childrenCount <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">final</span> <span class="token keyword">float</span> x <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span>actionIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">final</span> <span class="token keyword">float</span> y <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span>actionIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token keyword">final</span> ArrayList<span class="token operator">&lt;</span>View<span class="token operator">></span> preorderedList <span class="token operator">=</span> <span class="token function">buildTouchDispatchChildList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">final</span> <span class="token keyword">boolean</span> customOrder <span class="token operator">=</span> preorderedList <span class="token operator">==</span> null
                                <span class="token operator">&amp;&amp;</span> <span class="token function">isChildrenDrawingOrderEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">final</span> View<span class="token punctuation">[</span><span class="token punctuation">]</span> children <span class="token operator">=</span> mChildren<span class="token punctuation">;</span>

                        <span class="token comment" spellcheck="true">// é€šè¿‡ for å¾ªç¯ï¼Œéå†äº†å½“å‰ ViewGroup ä¸‹çš„æ‰€æœ‰å­ View</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> childrenCount <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡
                            <span class="token keyword">final</span> <span class="token keyword">int</span> childIndex <span class="token operator">=</span> <span class="token function">getAndVerifyPreorderedIndex</span><span class="token punctuation">(</span>
                                    childrenCount<span class="token punctuation">,</span> i<span class="token punctuation">,</span> customOrder<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">final</span> View child <span class="token operator">=</span> <span class="token function">getAndVerifyPreorderedView</span><span class="token punctuation">(</span>
                                    preorderedList<span class="token punctuation">,</span> children<span class="token punctuation">,</span> childIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

                            <span class="token keyword">if</span> <span class="token punctuation">(</span>childWithAccessibilityFocus <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>childWithAccessibilityFocus <span class="token operator">!=</span> child<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token keyword">continue</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                                childWithAccessibilityFocus <span class="token operator">=</span> null<span class="token punctuation">;</span>
                                i <span class="token operator">=</span> childrenCount <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>

                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">canViewReceivePointerEvents</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
                                    <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">isTransformedTouchPointInView</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> child<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                ev<span class="token punctuation">.</span><span class="token function">setTargetAccessibilityFocus</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token keyword">continue</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                            ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†

                            <span class="token comment" spellcheck="true">// è·å–æ–°çš„è§¦æ‘¸å¯¹è±¡ï¼Œå¦‚æœå½“å‰çš„å­ View åœ¨ä¹‹å‰çš„è§¦æ‘¸ç›®æ ‡çš„åˆ—è¡¨å½“ä¸­å°±è¿”å› touchTargetï¼Œ</span>
                            <span class="token comment" spellcheck="true">// å­ View ä¸åœ¨ä¹‹å‰çš„è§¦æ‘¸ç›®æ ‡åˆ—è¡¨é‚£ä¹ˆå°±è¿”å› null</span>
                            newTouchTarget <span class="token operator">=</span> <span class="token function">getTouchTarget</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>

                            <span class="token comment" spellcheck="true">// å¦‚æœæ–°çš„è§¦æ‘¸ç›®æ ‡å¯¹è±¡ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸ªè§¦æ‘¸çš„ ID èµ‹äºˆå®ƒ</span>
                            <span class="token comment" spellcheck="true">// è¿™ä¸ªè§¦æ‘¸çš„ç›®æ ‡å¯¹è±¡çš„ id å°±å«æœ‰äº†å¥½å‡ ä¸ª pointer çš„ ID äº†</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>newTouchTarget <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token comment" spellcheck="true">// Child is already receiving touch within its bounds.</span>
                                <span class="token comment" spellcheck="true">// Give it the new pointer in addition to the ones it is handling.</span>
                                newTouchTarget<span class="token punctuation">.</span>pointerIdBits <span class="token operator">|=</span> idBitsToAssign<span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>

                            <span class="token comment" spellcheck="true">// å¦‚æœå­ View ä¸åœ¨ä¹‹å‰çš„è§¦æ‘¸ç›®æ ‡åˆ—è¡¨ä¸­ï¼Œå…ˆé‡ç½® childView çš„æ ‡å¿—ï¼Œå»é™¤æ‰ CANCEL çš„æ ‡å¿—</span>
                            <span class="token function">resetCancelNextUpFlag</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>


                            <span class="token comment" spellcheck="true">/*
                             * æ´¾å‘äº‹ä»¶åˆ°å­ View å¤„ç†ï¼ˆè°ƒç”¨å­ View çš„ dispatchTouchEventï¼‰ ï¼Œå¹¶ä¸”æŠŠ pointer çš„ id èµ‹äºˆè¿›å»
                             * å¦‚æœè¯´ï¼Œå­ View æ¥æ”¶å¹¶ä¸”å¤„ç†äº†è¿™ä¸ªäº‹ä»¶ï¼Œé‚£ä¹ˆå°±æ›´æ–°ä¸Šä¸€æ¬¡è§¦æ‘¸äº‹ä»¶çš„ä¿¡æ¯ï¼Œ
                             * å¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–°çš„è§¦æ‘¸ç›®æ ‡å¯¹è±¡ï¼Œå¹¶ä¸”ç»‘å®šè¿™ä¸ªå­ View å’Œ Pointer çš„ ID
                             */</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">dispatchTransformedTouchEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> child<span class="token punctuation">,</span> idBitsToAssign<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                                <span class="token comment" spellcheck="true">// Child wants to receive touch within its bounds.</span>
                                mLastTouchDownTime <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token function">getDownTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>preorderedList <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token comment" spellcheck="true">// childIndex points into presorted list, find original index</span>
                                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> childrenCount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>children<span class="token punctuation">[</span>childIndex<span class="token punctuation">]</span> <span class="token operator">==</span> mChildren<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                            mLastTouchDownIndex <span class="token operator">=</span> j<span class="token punctuation">;</span>
                                            <span class="token keyword">break</span><span class="token punctuation">;</span>
                                        <span class="token punctuation">}</span>
                                    <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                    mLastTouchDownIndex <span class="token operator">=</span> childIndex<span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                                mLastTouchDownX <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                mLastTouchDownY <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                newTouchTarget <span class="token operator">=</span> <span class="token function">addTouchTarget</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> idBitsToAssign<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                alreadyDispatchedToNewTouchTarget <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                                <span class="token keyword">break</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// å¦‚æœå­ View å¤„ç†äº†äº‹ä»¶ï¼Œåˆ™ breakï¼ŒViewGroup ä¸åœ¨å¤„ç†äº‹ä»¶ï¼ˆäº‹ä»¶è¢«æ‹¦æˆªï¼‰</span>
                            <span class="token punctuation">}</span>

                            <span class="token comment" spellcheck="true">// The accessibility focus didn't handle the event, so clear</span>
                            <span class="token comment" spellcheck="true">// the flag and do a normal dispatch to all children.</span>
                            ev<span class="token punctuation">.</span><span class="token function">setTargetAccessibilityFocus</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>preorderedList <span class="token operator">!=</span> null<span class="token punctuation">)</span> preorderedList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>

                    <span class="token comment" spellcheck="true">/*
                     * å¦‚æœ newTouchTarget ä¸º nullï¼Œå°±ä»£è¡¨ï¼Œè¿™ä¸ªäº‹ä»¶æ²¡æœ‰æ‰¾åˆ°å­ View å»å¤„ç†å®ƒï¼Œ
                     * å¦‚æœä¹‹å‰å·²ç»æœ‰äº†è§¦æ‘¸å¯¹è±¡ï¼ˆæ¯”å¦‚ï¼Œæˆ‘ç‚¹äº†ä¸€å¼ å›¾ï¼Œå¦ä¸€ä¸ªæ‰‹æŒ‡åœ¨å¤–é¢å›¾çš„å¤–é¢ç‚¹ä¸‹å»ï¼‰ï¼Œ
                     * é‚£ä¹ˆå°±æŠŠè¿™ä¸ªä¹‹å‰é‚£ä¸ªè§¦æ‘¸ç›®æ ‡å®šä¸ºç¬¬ä¸€ä¸ªè§¦æ‘¸å¯¹è±¡ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªè§¦æ‘¸ï¼ˆpointerï¼‰åˆ†é…ç»™æœ€è¿‘æ·»åŠ çš„è§¦æ‘¸ç›®æ ‡
                     */</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>newTouchTarget <span class="token operator">==</span> null <span class="token operator">&amp;&amp;</span> mFirstTouchTarget <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment" spellcheck="true">// Did not find a child to receive the event.</span>
                        <span class="token comment" spellcheck="true">// Assign the pointer to the least recently added target.</span>
                        newTouchTarget <span class="token operator">=</span> mFirstTouchTarget<span class="token punctuation">;</span>
                        <span class="token keyword">while</span> <span class="token punctuation">(</span>newTouchTarget<span class="token punctuation">.</span>next <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            newTouchTarget <span class="token operator">=</span> newTouchTarget<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        newTouchTarget<span class="token punctuation">.</span>pointerIdBits <span class="token operator">|=</span> idBitsToAssign<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token comment" spellcheck="true">// å¦‚æœæ²¡æœ‰è§¦æ‘¸ç›®æ ‡</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mFirstTouchTarget <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">// é‚£ä¹ˆå°±è¡¨ç¤ºæˆ‘ä»¬è¦è‡ªå·±åœ¨è¿™ä¸ª ViewGroup å¤„ç†è¿™ä¸ªè§¦æ‘¸äº‹ä»¶äº†</span>
                handled <span class="token operator">=</span> <span class="token function">dispatchTransformedTouchEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">,</span> canceled<span class="token punctuation">,</span> null<span class="token punctuation">,</span>
                        TouchTarget<span class="token punctuation">.</span>ALL_POINTER_IDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                TouchTarget predecessor <span class="token operator">=</span> null<span class="token punctuation">;</span>
                TouchTarget target <span class="token operator">=</span> mFirstTouchTarget<span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">// éå† TouchTargt æ ‘åˆ†å‘äº‹ä»¶ï¼Œå¦‚æœæˆ‘ä»¬å·²ç»åˆ†å‘ç»™äº†æ–°çš„ TouchTargetï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸å†åˆ†å‘ç»™ newTouchTarget</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>target <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">final</span> TouchTarget next <span class="token operator">=</span> target<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>alreadyDispatchedToNewTouchTarget <span class="token operator">&amp;&amp;</span> target <span class="token operator">==</span> newTouchTarget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        handled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token comment" spellcheck="true">// æ˜¯å¦è®© child å–æ¶ˆå¤„ç†äº‹ä»¶ï¼Œå¦‚æœä¸º trueï¼Œå°±ä¼šåˆ†å‘ç»™ child ä¸€ä¸ª ACTION_CANCEL äº‹ä»¶</span>
                        <span class="token keyword">final</span> <span class="token keyword">boolean</span> cancelChild <span class="token operator">=</span> <span class="token function">resetCancelNextUpFlag</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>child<span class="token punctuation">)</span>
                                <span class="token operator">||</span> intercepted<span class="token punctuation">;</span>
                        <span class="token comment" spellcheck="true">// æ´¾å‘äº‹ä»¶</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">dispatchTransformedTouchEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">,</span> cancelChild<span class="token punctuation">,</span>
                                target<span class="token punctuation">.</span>child<span class="token punctuation">,</span> target<span class="token punctuation">.</span>pointerIdBits<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            handled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>

                        <span class="token comment" spellcheck="true">// cancelChildï¼šæ´¾å‘ç»™äº†å½“å‰ child ä¸€ä¸ª ACTION_CANCEL äº‹ä»¶ï¼Œ</span>
                        <span class="token comment" spellcheck="true">// ç§»é™¤è¿™ä¸ª child</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>cancelChild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>predecessor <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                mFirstTouchTarget <span class="token operator">=</span> next<span class="token punctuation">;</span>
                            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                <span class="token comment" spellcheck="true">// æŠŠä¸‹ä¸€ä¸ªèµ‹äºˆçˆ¶èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªï¼Œè¿™æ ·å½“å‰èŠ‚ç‚¹å°±è¢«ä¸¢å¼ƒäº†</span>
                                predecessor<span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>

                            <span class="token comment" spellcheck="true">// å›æ”¶å†…å­˜</span>
                            target<span class="token punctuation">.</span><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                            <span class="token comment" spellcheck="true">// æŠŠä¸‹ä¸€ä¸ªèµ‹äºˆç°åœ¨</span>
                            target <span class="token operator">=</span> next<span class="token punctuation">;</span>

                            <span class="token comment" spellcheck="true">// ä¸‹é¢çš„ä¸¤è¡Œä¸æ‰§è¡Œäº†ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»åšäº†é“¾è¡¨çš„æ“ä½œäº†ã€‚</span>
                            <span class="token comment" spellcheck="true">// ä¸»è¦æ˜¯æˆ‘ä»¬ä¸èƒ½æ‰§è¡Œpredecessor=targetï¼Œå› ä¸ºåˆ é™¤æœ¬èŠ‚ç‚¹çš„è¯ï¼Œçˆ¶èŠ‚ç‚¹è¿˜æ˜¯çˆ¶èŠ‚ç‚¹</span>
                            <span class="token keyword">continue</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    <span class="token comment" spellcheck="true">// å¦‚æœæ²¡æœ‰åˆ é™¤æœ¬èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¸‹ä¸€è½®çˆ¶èŠ‚ç‚¹å°±æ˜¯å½“å‰èŠ‚ç‚¹ï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿæ˜¯ä¸‹ä¸€è½®çš„å½“å‰èŠ‚ç‚¹</span>
                    predecessor <span class="token operator">=</span> target<span class="token punctuation">;</span>
                    target <span class="token operator">=</span> next<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token comment" spellcheck="true">// Update list of touch targets for pointer up or cancel, if needed.</span>
            <span class="token comment" spellcheck="true">// é‡åˆ°äº†å–æ¶ˆäº‹ä»¶ã€æˆ–è€…æ˜¯å•ç‚¹è§¦æ‘¸ä¸‹æƒ…å†µä¸‹æ‰‹æŒ‡ç¦»å¼€ï¼Œæˆ‘ä»¬å°±è¦æ›´æ–°è§¦æ‘¸çš„çŠ¶æ€</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>canceled
                    <span class="token operator">||</span> actionMasked <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_UP
                    <span class="token operator">||</span> actionMasked <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_HOVER_MOVE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">resetTouchState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>split <span class="token operator">&amp;&amp;</span> actionMasked <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_POINTER_UP<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">// å¦‚æœæ˜¯å¤šç‚¹è§¦æ‘¸ä¸‹çš„æ‰‹æŒ‡æŠ¬èµ·äº‹ä»¶ï¼Œå°±è¦æ ¹æ® idBit ä» TouchTarget ä¸­ç§»é™¤æ‰å¯¹åº”çš„ Pointer (è§¦æ‘¸ç‚¹)</span>
                <span class="token keyword">final</span> <span class="token keyword">int</span> actionIndex <span class="token operator">=</span> ev<span class="token punctuation">.</span><span class="token function">getActionIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">final</span> <span class="token keyword">int</span> idBitsToRemove <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> ev<span class="token punctuation">.</span><span class="token function">getPointerId</span><span class="token punctuation">(</span>actionIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">removePointersFromTouchTargets</span><span class="token punctuation">(</span>idBitsToRemove<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handled <span class="token operator">&amp;&amp;</span> mInputEventConsistencyVerifier <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mInputEventConsistencyVerifier<span class="token punctuation">.</span><span class="token function">onUnhandledEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> handled<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="3-2-2-onInterceptTouchEvent"><a href="#3-2-2-onInterceptTouchEvent" class="headerlink" title="3.2.2 onInterceptTouchEvent"></a>3.2.2 onInterceptTouchEvent</h3><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onInterceptTouchEvent</span><span class="token punctuation">(</span>MotionEvent ev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span><span class="token function">isFromSource</span><span class="token punctuation">(</span>InputDevice<span class="token punctuation">.</span>SOURCE_MOUSE<span class="token punctuation">)</span>
                <span class="token operator">&amp;&amp;</span> ev<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_DOWN
                <span class="token operator">&amp;&amp;</span> ev<span class="token punctuation">.</span><span class="token function">isButtonPressed</span><span class="token punctuation">(</span>MotionEvent<span class="token punctuation">.</span>BUTTON_PRIMARY<span class="token punctuation">)</span>
                <span class="token operator">&amp;&amp;</span> <span class="token function">isOnScrollbarThumb</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ev<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="3-3-3-dispatchTransformedTouchEvent"><a href="#3-3-3-dispatchTransformedTouchEvent" class="headerlink" title="3.3.3 dispatchTransformedTouchEvent"></a>3.3.3 dispatchTransformedTouchEvent</h3><pre class=" language-java"><code class="language-java">    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">dispatchTransformedTouchEvent</span><span class="token punctuation">(</span>MotionEvent event<span class="token punctuation">,</span> <span class="token keyword">boolean</span> cancel<span class="token punctuation">,</span>
            View child<span class="token punctuation">,</span> <span class="token keyword">int</span> desiredPointerIdBits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">boolean</span> handled<span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>newPointerIdBits <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Log<span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">"Dispatch transformed touch event without pointers in "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">final</span> MotionEvent transformedEvent<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newPointerIdBits <span class="token operator">==</span> oldPointerIdBits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> null <span class="token operator">||</span> child<span class="token punctuation">.</span><span class="token function">hasIdentityMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    handled <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispatchTouchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">final</span> <span class="token keyword">float</span> offsetX <span class="token operator">=</span> mScrollX <span class="token operator">-</span> child<span class="token punctuation">.</span>mLeft<span class="token punctuation">;</span>
                    <span class="token keyword">final</span> <span class="token keyword">float</span> offsetY <span class="token operator">=</span> mScrollY <span class="token operator">-</span> child<span class="token punctuation">.</span>mTop<span class="token punctuation">;</span>
                    event<span class="token punctuation">.</span><span class="token function">offsetLocation</span><span class="token punctuation">(</span>offsetX<span class="token punctuation">,</span> offsetY<span class="token punctuation">)</span><span class="token punctuation">;</span>

                    handled <span class="token operator">=</span> child<span class="token punctuation">.</span><span class="token function">dispatchTouchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// dispatchTouchEvent()</span>

                    event<span class="token punctuation">.</span><span class="token function">offsetLocation</span><span class="token punctuation">(</span><span class="token operator">-</span>offsetX<span class="token punctuation">,</span> <span class="token operator">-</span>offsetY<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> handled<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            transformedEvent <span class="token operator">=</span> MotionEvent<span class="token punctuation">.</span><span class="token function">obtain</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            transformedEvent <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>newPointerIdBits<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">// Perform any necessary transformations and dispatch.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            handled <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispatchTouchEvent</span><span class="token punctuation">(</span>transformedEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">final</span> <span class="token keyword">float</span> offsetX <span class="token operator">=</span> mScrollX <span class="token operator">-</span> child<span class="token punctuation">.</span>mLeft<span class="token punctuation">;</span>
            <span class="token keyword">final</span> <span class="token keyword">float</span> offsetY <span class="token operator">=</span> mScrollY <span class="token operator">-</span> child<span class="token punctuation">.</span>mTop<span class="token punctuation">;</span>
            transformedEvent<span class="token punctuation">.</span><span class="token function">offsetLocation</span><span class="token punctuation">(</span>offsetX<span class="token punctuation">,</span> offsetY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> child<span class="token punctuation">.</span><span class="token function">hasIdentityMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                transformedEvent<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span><span class="token function">getInverseMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            handled <span class="token operator">=</span> child<span class="token punctuation">.</span><span class="token function">dispatchTouchEvent</span><span class="token punctuation">(</span>transformedEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// dispatchTouchEvent()</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token comment" spellcheck="true">// Done.</span>
        transformedEvent<span class="token punctuation">.</span><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> handled<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<p>OKï¼Œè‡³æ­¤ï¼Œæˆ‘ä»¬ ViewGroup ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶çš„æºç æµç¨‹åˆ†æå®Œäº†ï¼</p>
<hr>
<h3 id="3-2-4-Demo"><a href="#3-2-4-Demo" class="headerlink" title="3.2.4 Demo"></a>3.2.4 Demo</h3><p>å‰é¢ä¸¤èŠ‚åˆ†æäº†ä¸€å †ä»£ç ï¼Œå¾ˆæ¯ç‡¥å•Šï¼Œè¦ä¸æ¥ä¸ª Demo è§£è§£ä¹ï¼Œçœ‹çœ‹å®é™…æ¡ˆä¾‹ä¸­äº‹ä»¶åˆ†å‘æœºåˆ¶çš„å¤„ç†æµç¨‹ï¼Œç†è®ºå®é™…ç›¸ç»“åˆï¼Œå°è±¡æ‰ä¼šæ›´æ·±åˆ»ï¼</p>
<p><strong>Layoutå±‚æ¬¡ï¼š</strong></p>
<center><img src="https://upload-images.jianshu.io/upload_images/3517194-e7ef15d4b48428d2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="layout.png"></center>

<p><strong>Layout ä»£ç ï¼š</strong></p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">?</span><span class="token operator">></span>
<span class="token operator">&lt;</span>android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>constraint<span class="token punctuation">.</span>ConstraintLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res/android"</span>
    xmlns<span class="token operator">:</span>app<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res-auto"</span>
    xmlns<span class="token operator">:</span>tools<span class="token operator">=</span><span class="token string">"http://schemas.android.com/tools"</span>
    android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/my_layout"</span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
    tools<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">".MainActivity"</span><span class="token operator">></span>

    <span class="token operator">&lt;</span>Button
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/button_01"</span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"wrap_content"</span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"Button_01"</span>
        tools<span class="token operator">:</span>layout_editor_absoluteX<span class="token operator">=</span><span class="token string">"94dp"</span>
        tools<span class="token operator">:</span>layout_editor_absoluteY<span class="token operator">=</span><span class="token string">"106dp"</span> <span class="token operator">/</span><span class="token operator">></span>

    <span class="token operator">&lt;</span>Button
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/button_02"</span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"wrap_content"</span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"Button_02"</span>
        tools<span class="token operator">:</span>layout_editor_absoluteX<span class="token operator">=</span><span class="token string">"94dp"</span>
        tools<span class="token operator">:</span>layout_editor_absoluteY<span class="token operator">=</span><span class="token string">"211dp"</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>constraint<span class="token punctuation">.</span>ConstraintLayout<span class="token operator">></span>
</code></pre>
<p><strong>Activity ä»£ç ï¼š</strong></p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>marco<span class="token punctuation">.</span>myapplication<span class="token punctuation">;</span>

<span class="token keyword">import</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>constraint<span class="token punctuation">.</span>ConstraintLayout<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Log<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>view<span class="token punctuation">.</span>View<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>view<span class="token punctuation">.</span>ViewGroup<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>Button<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> Button button_01<span class="token punctuation">;</span>
    <span class="token keyword">private</span> Button button_02<span class="token punctuation">;</span>
    <span class="token keyword">private</span> ViewGroup myLayout<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>

        button_01 <span class="token operator">=</span> <span class="token punctuation">(</span>Button<span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button_01<span class="token punctuation">)</span><span class="token punctuation">;</span>
        button_02 <span class="token operator">=</span> <span class="token punctuation">(</span>Button<span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button_02<span class="token punctuation">)</span><span class="token punctuation">;</span>
        myLayout <span class="token operator">=</span> <span class="token punctuation">(</span>ConstraintLayout<span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>my_layout<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 1. ViewGroup: myLayout å¸ƒå±€è®¾ç½®ç›‘å¬äº‹ä»¶</span>
        myLayout<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"ç‚¹å‡»äº†ViewGroup"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 2. View: button_01 è®¾ç½®ç›‘å¬äº‹ä»¶</span>
        button_01<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"ç‚¹å‡»äº†button_01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 3. View: button_02è®¾ç½®ç›‘å¬äº‹ä»¶</span>
        button_02<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"ç‚¹å‡»äº†button_02"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>
<pre class=" language-java"><code class="language-java"><span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">51.877</span> <span class="token number">16250</span> <span class="token number">16250</span> D TAG <span class="token operator">:</span> ç‚¹å‡»äº†button_01     <span class="token comment" spellcheck="true">// ç‚¹å‡»æŒ‰é’® button_01</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">53.875</span> <span class="token number">16250</span> <span class="token number">16250</span> D TAG <span class="token operator">:</span> ç‚¹å‡»äº†button_02     <span class="token comment" spellcheck="true">// ç‚¹å‡»æŒ‰é’® button_02</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">54.758</span> <span class="token number">16250</span> <span class="token number">16250</span> D TAG <span class="token operator">:</span> ç‚¹å‡»äº†ViewGroup     <span class="token comment" spellcheck="true">// ç‚¹å‡»ç©ºç™½å¤„</span>
</code></pre>
<p><strong>ç»“æœè¯´æ˜ï¼š</strong></p>
<ul>
<li>ç‚¹å‡» Button æ—¶ï¼Œæ‰§è¡Œ Button.onClick()ï¼Œä½† ViewGroup_Layout æ³¨å†Œçš„ onTouch() ä¸ä¼šæ‰§è¡Œï¼›</li>
<li>åªæœ‰ç‚¹å‡»ç©ºç™½åŒºåŸŸæ—¶ï¼Œæ‰ä¼šæ‰§è¡Œ ViewGroup_Layout çš„ onTouch() æ–¹æ³•ã€‚</li>
</ul>
<p><strong>ç»“è®ºï¼š</strong>Button çš„ onClick() å°†äº‹ä»¶æ¶ˆè´¹æ‰äº†ï¼Œå› æ­¤äº‹ä»¶ä¸ä¼šå†ç»§ç»­å‘ä¸‹ä¼ é€’ã€‚</p>
<hr>
<h3 id="3-2-5-æ€»ç»“"><a href="#3-2-5-æ€»ç»“" class="headerlink" title="3.2.5 æ€»ç»“"></a>3.2.5 æ€»ç»“</h3><p><strong> ä¼‘æ¯ç‰‡åˆ»ï¼Œåšä¸ªå°ç»“ </strong></p>
<ul>
<li>ç›¸æ¯”äºActivityçš„äº‹ä»¶åˆ†å‘æœºåˆ¶çš„åˆ†ææµç¨‹ï¼ŒViewGroupå¤æ‚å¾ˆå¤šï¼</li>
<li>æ­¤æ—¶ï¼Œæˆ‘ä»¬æ‰€éœ€è¦äº†è§£ä»¥ä¸‹å‡ ç‚¹ï¼š<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;âœ¨&nbsp;å¯¹äºä»»ä½•æºç çš„åˆ†æï¼Œä¸å¯èƒ½ä¸€éå°±èƒ½è¯»æ‡‚ï¼›<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;âœ¨&nbsp;å¯¹äºä»»ä½•æºç çš„åˆ†æï¼Œå³æ—¶ä½ å¤šè¯»å‡ éä¹Ÿæœªå¿…å°±ä¸€å®šèƒ½åƒé€ï¼›<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;âœ¨&nbsp;å¯¹äºä»»ä½•æºç çš„åˆ†æï¼Œé™ä¸‹å¿ƒæ¥å¤šåšæŒå­¦ä¹  + ç³»ç»Ÿæ€§çš„å½’çº³æ•´ç†ï¼Œç›¸ä¿¡ä½ æ€»èƒ½å®Œå…¨äº†è§£å®ƒï¼</li>
</ul>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ ¹æ®æµç¨‹å›¾ - æ¢³ç†æµç¨‹æ¥æ•´ç†æ€è·¯æ˜¯æœ€å¥½çš„æ–¹æ³•ï¼šï¼ˆ<strong> äº†è§£æ•´ä¸ªäº‹ä»¶åˆ†å‘æœºåˆ¶çš„æµç¨‹å³å¯ï¼Œç»†èŠ‚æ…¢æ…¢ä½“ä¼šï¼ </strong>ï¼‰</p>
<center><img src="https://upload-images.jianshu.io/upload_images/3517194-751a10fb6d6dcd5d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ViewGroupäº‹ä»¶åˆ†å‘å¤„ç†æµç¨‹.png"></center>

<hr>
<h2 id="3-3-View-å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶"><a href="#3-3-View-å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶" class="headerlink" title="3.3 View å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶"></a>3.3 View å¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶</h2><p>ä» Activity äº‹ä»¶åˆ†å‘æœºåˆ¶å¯çŸ¥ï¼ŒViewGroup äº‹ä»¶åˆ†å‘æœºåˆ¶ä» dispatchTouchEvent() å¼€å§‹ï¼Œä» ViewGroup äº‹ä»¶åˆ†å‘æœºåˆ¶å¯çŸ¥ï¼ŒView äº‹ä»¶åˆ†å‘æœºåˆ¶ä» dispatchTouchEvent()å¼€å§‹ã€‚</p>
<blockquote>
<p>å…¶å®ï¼Œä½ åªéœ€è¦æ¸…æ¥šè¿™æ ·çš„è¯´æ³•ï¼ˆåŸç†ï¼‰ï¼šåªè¦ä½ è§¦æ‘¸äº†ä»»ä½•æ§ä»¶ï¼Œå°±ä¸€å®šä¼šè°ƒç”¨è¯¥æ§ä»¶çš„ dispatchTouchEvent æ–¹æ³•ï¼<strong>ä¸¥æ ¼ä¸€ç‚¹æ¥è¯´ï¼š</strong>å½“ä½ ç‚¹å‡»äº†æŸä¸ªæ§ä»¶ï¼Œé¦–å…ˆä¼šå»è°ƒç”¨è¯¥<strong>æ§ä»¶æ‰€åœ¨å¸ƒå±€çš„ dispatchTouchEvent æ–¹æ³•</strong>ï¼Œç„¶ååœ¨å¸ƒå±€çš„ dispatchTouchEvent æ–¹æ³•ä¸­<strong>æ‰¾åˆ°è¢«ç‚¹å‡»çš„ç›¸åº”æ§ä»¶</strong>ï¼Œå†å»è°ƒç”¨è¯¥<strong>æ§ä»¶çš„ dispatchTouchEventæ–¹æ³•</strong>ã€‚</p>
</blockquote>
<h3 id="3-3-1-dispatchTouchEvent"><a href="#3-3-1-dispatchTouchEvent" class="headerlink" title="3.3.1 dispatchTouchEvent"></a>3.3.1 dispatchTouchEvent</h3><pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">/**
     * Pass the touch screen motion event down to the target view, or this
     * view if it is the target.
     *
     * @param event The motion event to be dispatched.
     * @return True if the event was handled by the view, false otherwise.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">dispatchTouchEvent</span><span class="token punctuation">(</span>MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// If the event should be handled by accessibility focus first.</span>

        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">onFilterTouchEventForSecurity</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>mViewFlags <span class="token operator">&amp;</span> ENABLED_MASK<span class="token punctuation">)</span> <span class="token operator">==</span> ENABLED <span class="token operator">&amp;&amp;</span> <span class="token function">handleScrollBarDragging</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment" spellcheck="true">//noinspection SimplifiableIfStatement</span>
            ListenerInfo li <span class="token operator">=</span> mListenerInfo<span class="token punctuation">;</span>

            ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥é‡ç‚¹æ–¹æ³•ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥
            <span class="token comment" spellcheck="true">/*
             * æ³¨æ„ï¼šåªæœ‰ä»¥ä¸‹3ä¸ªæ¡ä»¶éƒ½ä¸ºçœŸï¼ŒdispatchTouchEvent() æ‰è¿”å› true
             *       1. mListenerInfo != null &amp; mListenerInfo.mOnTouchListener != null
             *       2. (mViewFlags &amp; ENABLED_MASK) == ENABLED
             *       3. mListenerInfo.mOnTouchListener.onTouch(this, event)
             */</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>li <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> li<span class="token punctuation">.</span>mOnTouchListener <span class="token operator">!=</span> null
                    <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>mViewFlags <span class="token operator">&amp;</span> ENABLED_MASK<span class="token punctuation">)</span> <span class="token operator">==</span> ENABLED
                    <span class="token operator">&amp;&amp;</span> li<span class="token punctuation">.</span>mOnTouchListener<span class="token punctuation">.</span><span class="token function">onTouch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥åˆ†åˆ«åˆ†æä¸Šé¢å‡ ä¸ªæ¡ä»¶ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥ğŸ’¥

            <span class="token comment" spellcheck="true">// å¦‚æœä¸Šé¢æ²¡æœ‰è¿”å› trueï¼Œé‚£ä¹ˆæ‰§è¡Œ onTouchEvent()</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result <span class="token operator">&amp;&amp;</span> <span class="token function">onTouchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>               <span class="token comment" spellcheck="true">// ä¸‹é¢å†åˆ†æ</span>
                result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><strong><font color="0000FF">æ¡ä»¶1ï¼šmListenerInfo != null &amp; mListenerInfo.mOnTouchListener != null</font></strong></p>
</blockquote>
<p>mOnTouchListener è¿™ä¸ªå˜é‡æ˜¯åœ¨å“ªé‡Œèµ‹å€¼çš„å‘¢ï¼Ÿ</p>
<pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">/**
      * æ¡ä»¶1ï¼šmListenerInfo.mOnTouchListener != null
      * è¯´æ˜ï¼šmOnTouchListener å˜é‡åœ¨ View.setOnTouchListener() æ–¹æ³•é‡Œèµ‹å€¼
      */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setOnTouchListener</span><span class="token punctuation">(</span>OnTouchListener l<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// åªè¦æˆ‘ä»¬ç»™æ§ä»¶æ³¨å†Œäº† Touch äº‹ä»¶ï¼ŒmOnTouchListener å°±ä¸€å®šè¢«èµ‹å€¼ï¼ˆä¸ä¸ºç©ºï¼‰</span>
        <span class="token function">getListenerInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mOnTouchListener <span class="token operator">=</span> l<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><strong><font color="0000FF">æ¡ä»¶2ï¼š(mViewFlags &amp; ENABLED_MASK) == ENABLED</font></strong></p>
</blockquote>
<pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">/**
      * æ¡ä»¶2ï¼š(mViewFlags &amp; ENABLED_MASK) == ENABLED
      * è¯´æ˜ï¼š
      *     a. è¯¥æ¡ä»¶æ˜¯åˆ¤æ–­å½“å‰ç‚¹å‡»çš„æ§ä»¶æ˜¯å¦ enable
      *     b. ä¸€èˆ¬ View é»˜è®¤ enableï¼Œæ•…è¯¥æ¡ä»¶æ’å®šä¸º true
      */</span>
</code></pre>
<blockquote>
<p><strong><font color="0000FF">æ¡ä»¶3ï¼šmListenerInfo.mOnTouchListener.onTouch(this, event)</font></strong></p>
</blockquote>
<p>mListenerInfo.mOnTouchListener.onTouch(this, event)ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å»å›è°ƒæ§ä»¶æ³¨å†Œ touch äº‹ä»¶æ—¶çš„ onTouch æ–¹æ³•ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬åœ¨ onTouch æ–¹æ³•é‡Œè¿”å› trueï¼Œå°±ä¼šè®©è¿™ä¸‰ä¸ªæ¡ä»¶å…¨éƒ¨æˆç«‹ï¼Œä»è€Œæ•´ä¸ªæ–¹æ³•ç›´æ¥è¿”å› trueã€‚å¦‚æœæˆ‘ä»¬åœ¨ onTouch æ–¹æ³•é‡Œè¿”å› falseï¼Œå°±ä¼šå†å»æ‰§è¡Œ onTouchEvent(event) æ–¹æ³•ã€‚</p>
<pre class=" language-java"><code class="language-java">    <span class="token comment" spellcheck="true">/**
      * æ¡ä»¶3ï¼šmOnTouchListener.onTouch(this, event)
      * è¯´æ˜ï¼šå›è°ƒæ§ä»¶æ³¨å†Œ Touch äº‹ä»¶æ—¶çš„ onTouch()
      */</span>
    button<span class="token punctuation">.</span><span class="token function">setOnTouchListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OnTouchListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token annotation punctuation">@Override</span>  
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onTouch</span><span class="token punctuation">(</span>View v<span class="token punctuation">,</span> MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="3-3-2-onTouchEvent"><a href="#3-3-2-onTouchEvent" class="headerlink" title="3.3.2 onTouchEvent"></a>3.3.2 onTouchEvent</h3><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onTouchEvent</span><span class="token punctuation">(</span>MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">float</span> x <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">float</span> y <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> viewFlags <span class="token operator">=</span> mViewFlags<span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> action <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token keyword">boolean</span> clickable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>viewFlags <span class="token operator">&amp;</span> CLICKABLE<span class="token punctuation">)</span> <span class="token operator">==</span> CLICKABLE
                <span class="token operator">||</span> <span class="token punctuation">(</span>viewFlags <span class="token operator">&amp;</span> LONG_CLICKABLE<span class="token punctuation">)</span> <span class="token operator">==</span> LONG_CLICKABLE<span class="token punctuation">)</span>
                <span class="token operator">||</span> <span class="token punctuation">(</span>viewFlags <span class="token operator">&amp;</span> CONTEXT_CLICKABLE<span class="token punctuation">)</span> <span class="token operator">==</span> CONTEXT_CLICKABLE<span class="token punctuation">;</span>

        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token comment" spellcheck="true">// è‹¥è¯¥æ§ä»¶å¯ç‚¹å‡»ï¼Œåˆ™è¿›å…¥ switch åˆ¤æ–­ä¸­</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>clickable <span class="token operator">||</span> <span class="token punctuation">(</span>viewFlags <span class="token operator">&amp;</span> TOOLTIP<span class="token punctuation">)</span> <span class="token operator">==</span> TOOLTIP<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ğŸ’¥ <span class="token comment" spellcheck="true">// a. è‹¥å½“å‰çš„äº‹ä»¶ = æŠ¬èµ· View</span>
                <span class="token keyword">case</span> MotionEvent<span class="token punctuation">.</span>ACTION_UP<span class="token operator">:</span>
                    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                    <span class="token keyword">boolean</span> prepressed <span class="token operator">=</span> <span class="token punctuation">(</span>mPrivateFlags <span class="token operator">&amp;</span> PFLAG_PREPRESSED<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>mPrivateFlags <span class="token operator">&amp;</span> PFLAG_PRESSED<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">||</span> prepressed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mHasPerformedLongPress <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>mIgnoreNextUpEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token comment" spellcheck="true">// This is a tap, so remove the longpress check</span>
                            <span class="token function">removeLongPressCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                            <span class="token comment" spellcheck="true">// Only perform take click actions if we were in the pressed state</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>focusTaken<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token comment" spellcheck="true">// Use a Runnable and post this rather than calling</span>
                                <span class="token comment" spellcheck="true">// performClick directly. This lets other visual state</span>
                                <span class="token comment" spellcheck="true">// of the view update before click actions start.</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>mPerformClick <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    mPerformClick <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerformClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">post</span><span class="token punctuation">(</span>mPerformClick<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token function">performClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// é‡ç‚¹åˆ†æå‡½æ•°</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>

                ğŸ’¥ <span class="token comment" spellcheck="true">// b. è‹¥å½“å‰çš„äº‹ä»¶ = æŒ‰ä¸‹ View</span>
                <span class="token keyword">case</span> MotionEvent<span class="token punctuation">.</span>ACTION_DOWN<span class="token operator">:</span>
                    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>

                ğŸ’¥ <span class="token comment" spellcheck="true">// c. è‹¥å½“å‰çš„äº‹ä»¶ = ç»“æŸäº‹ä»¶ï¼ˆéäººä¸ºåŸå› ï¼‰</span>
                <span class="token keyword">case</span> MotionEvent<span class="token punctuation">.</span>ACTION_CANCEL<span class="token operator">:</span>
                    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>

                ğŸ’¥ <span class="token comment" spellcheck="true">// d. è‹¥å½“å‰çš„äº‹ä»¶ = æ»‘åŠ¨ View</span>
                <span class="token keyword">case</span> MotionEvent<span class="token punctuation">.</span>ACTION_MOVE<span class="token operator">:</span>
                    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment" spellcheck="true">// è‹¥è¯¥æ§ä»¶å¯ç‚¹å‡»ï¼Œå°±ä¸€å®šè¿”å›true</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment" spellcheck="true">// è‹¥è¯¥æ§ä»¶ä¸å¯ç‚¹å‡»ï¼Œå°±ä¸€å®šè¿”å›false</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="3-3-3-performClick"><a href="#3-3-3-performClick" class="headerlink" title="3.3.3 performClick"></a>3.3.3 performClick</h3><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">performClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token keyword">boolean</span> result<span class="token punctuation">;</span>
        <span class="token keyword">final</span> ListenerInfo li <span class="token operator">=</span> mListenerInfo<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">/*
         * åªè¦æˆ‘ä»¬é€šè¿‡ setOnClickListener() ä¸ºæ§ä»¶ View æ³¨å†Œ1ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œ
         * é‚£ä¹ˆå°±ä¼šç»™ li.mOnClickListener å˜é‡èµ‹å€¼ï¼ˆå³ä¸ä¸ºç©ºï¼‰ï¼Œåˆ™ä¼šå¾€ä¸‹å›è°ƒ onClick()ï¼ŒperformClick() è¿”å› trueã€‚
         */</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>li <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> li<span class="token punctuation">.</span>mOnClickListener <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">playSoundEffect</span><span class="token punctuation">(</span>SoundEffectConstants<span class="token punctuation">.</span>CLICK<span class="token punctuation">)</span><span class="token punctuation">;</span>
            li<span class="token punctuation">.</span>mOnClickListener<span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">sendAccessibilityEvent</span><span class="token punctuation">(</span>AccessibilityEvent<span class="token punctuation">.</span>TYPE_VIEW_CLICKED<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">notifyEnterOrExitForAutoFillIfNeeded</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
<hr>
<h3 id="3-3-4-Demo"><a href="#3-3-4-Demo" class="headerlink" title="3.3.4 Demo"></a>3.3.4 Demo</h3><p>è€è§„çŸ©ï¼Œçœ‹å®Œæºç ï¼Œå†æ¥ä¸ª Demo è§£è§£ä¹ï¼</p>
<p><strong>Layoutä»£ç ï¼š</strong></p>
<pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">?</span><span class="token operator">></span>
<span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res/android"</span>
    xmlns<span class="token operator">:</span>app<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res-auto"</span>
    xmlns<span class="token operator">:</span>tools<span class="token operator">=</span><span class="token string">"http://schemas.android.com/tools"</span>
    android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/my_layout"</span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string">"vertical"</span>
    tools<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">".MainActivity"</span><span class="token operator">></span>

    <span class="token operator">&lt;</span>Button
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/button_01"</span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"wrap_content"</span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"Button_01"</span>
        tools<span class="token operator">:</span>layout_editor_absoluteX<span class="token operator">=</span><span class="token string">"94dp"</span>
        tools<span class="token operator">:</span>layout_editor_absoluteY<span class="token operator">=</span><span class="token string">"106dp"</span> <span class="token operator">/</span><span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">></span>
</code></pre>
<p><strong>Activityä»£ç ï¼š</strong></p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>marco<span class="token punctuation">.</span>myapplication<span class="token punctuation">;</span>

<span class="token keyword">import</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>constraint<span class="token punctuation">.</span>ConstraintLayout<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Log<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>view<span class="token punctuation">.</span>MotionEvent<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>view<span class="token punctuation">.</span>View<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>view<span class="token punctuation">.</span>ViewGroup<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>Button<span class="token punctuation">;</span>
<span class="token keyword">import</span> android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>LinearLayout<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> Button button_01<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>

        button_01 <span class="token operator">=</span> <span class="token punctuation">(</span>Button<span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>button_01<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">/**
          * ç»“è®ºéªŒè¯1ï¼šåœ¨å›è°ƒ onTouch() é‡Œè¿”å› false
        */</span>
        <span class="token comment" spellcheck="true">// 1. é€šè¿‡ OnTouchListener() å¤å†™ onTouch()ï¼Œä»è€Œæ‰‹åŠ¨è®¾ç½®è¿”å› false</span>
        button_01<span class="token punctuation">.</span><span class="token function">setOnTouchListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnTouchListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onTouch</span><span class="token punctuation">(</span>View v<span class="token punctuation">,</span> MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"run onTouch(), action:"</span> <span class="token operator">+</span> event<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 2. é€šè¿‡ OnClickListenerï¼ˆï¼‰ä¸ºæ§ä»¶è®¾ç½®ç‚¹å‡»äº‹ä»¶ï¼Œä¸º mOnClickListener å˜é‡èµ‹å€¼ï¼ˆå³ä¸ä¸ºç©ºï¼‰ï¼Œä»è€Œå¾€ä¸‹å›è°ƒ onClickï¼ˆï¼‰</span>
        button_01<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"run onClick()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
        <span class="token comment" spellcheck="true">/**
          * ç»“è®ºéªŒè¯2ï¼šåœ¨å›è°ƒ onTouch() é‡Œè¿”å› true
          */</span>
        <span class="token comment" spellcheck="true">// 1. é€šè¿‡ OnTouchListener()å¤å†™ onTouch()ï¼Œä»è€Œæ‰‹åŠ¨è®¾ç½®è¿”å› true</span>
        button_01<span class="token punctuation">.</span><span class="token function">setOnTouchListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnTouchListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onTouch</span><span class="token punctuation">(</span>View v<span class="token punctuation">,</span> MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"run onTouch(), action:"</span> <span class="token operator">+</span> event<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 2. é€šè¿‡ OnClickListenerï¼ˆï¼‰ä¸ºæ§ä»¶è®¾ç½®ç‚¹å‡»äº‹ä»¶ï¼Œä¸º mOnClickListener å˜é‡èµ‹å€¼ï¼ˆå³ä¸ä¸ºç©ºï¼‰ï¼Œä»è€Œå¾€ä¸‹å›è°ƒ onClickï¼ˆï¼‰</span>
        button_01<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"run onClick()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong></p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// é€šè¿‡ OnTouchListener() å¤å†™ onTouch()ï¼Œä»è€Œæ‰‹åŠ¨è®¾ç½®è¿”å› false</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">18</span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">19.299</span> <span class="token number">23350</span> <span class="token number">23350</span> D TAG <span class="token operator">:</span> run <span class="token function">onTouch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span><span class="token number">0</span>    <span class="token comment" spellcheck="true">// ACTION_DOWN</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">18</span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">19.327</span> <span class="token number">23350</span> <span class="token number">23350</span> D TAG <span class="token operator">:</span> run <span class="token function">onTouch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span><span class="token number">2</span>    <span class="token comment" spellcheck="true">// ACTION_MOVE</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">18</span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">19.343</span> <span class="token number">23350</span> <span class="token number">23350</span> D TAG <span class="token operator">:</span> run <span class="token function">onTouch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span><span class="token number">2</span>    <span class="token comment" spellcheck="true">// ACTION_MOVE</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">18</span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">19.383</span> <span class="token number">23350</span> <span class="token number">23350</span> D TAG <span class="token operator">:</span> run <span class="token function">onTouch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span><span class="token number">2</span>    <span class="token comment" spellcheck="true">// ACTION_MOVE</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">18</span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">19.384</span> <span class="token number">23350</span> <span class="token number">23350</span> D TAG <span class="token operator">:</span> run <span class="token function">onTouch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span><span class="token number">1</span>    <span class="token comment" spellcheck="true">// ACTION_UP</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">18</span><span class="token operator">:</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">19.385</span> <span class="token number">23350</span> <span class="token number">23350</span> D TAG <span class="token operator">:</span> run <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// é€šè¿‡ OnTouchListener() å¤å†™ onTouch()ï¼Œä»è€Œæ‰‹åŠ¨è®¾ç½®è¿”å› true</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">18</span><span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span><span class="token number">29.758</span> <span class="token number">23847</span> <span class="token number">23847</span> D TAG <span class="token operator">:</span> run <span class="token function">onTouch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span><span class="token number">0</span>    <span class="token comment" spellcheck="true">// ACTION_DOWN</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">18</span><span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span><span class="token number">29.773</span> <span class="token number">23847</span> <span class="token number">23847</span> D TAG <span class="token operator">:</span> run <span class="token function">onTouch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span><span class="token number">2</span>    <span class="token comment" spellcheck="true">// ACTION_MOVE</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">18</span><span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span><span class="token number">29.856</span> <span class="token number">23847</span> <span class="token number">23847</span> D TAG <span class="token operator">:</span> run <span class="token function">onTouch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span><span class="token number">2</span>    <span class="token comment" spellcheck="true">// ACTION_MOVE</span>
<span class="token number">09</span><span class="token operator">-</span><span class="token number">26</span> <span class="token number">18</span><span class="token operator">:</span><span class="token number">16</span><span class="token operator">:</span><span class="token number">29.858</span> <span class="token number">23847</span> <span class="token number">23847</span> D TAG <span class="token operator">:</span> run <span class="token function">onTouch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> action<span class="token operator">:</span><span class="token number">1</span>    <span class="token comment" spellcheck="true">// ACTION_UP</span>
</code></pre>
<p><strong>ç»“æœè¯´æ˜ï¼š</strong></p>
<p>é€šè¿‡ä¸Šé¢çš„ Demoï¼Œæ„Ÿè§‰æ€ä¹ˆæ ·ï¼Ÿæ˜¯ä¸æ˜¯å¾ˆæ¸…æ¥šäº†ï¼Ÿä»”ç»†ç¢ç£¨ä¸€ä¸‹ï¼Œæ‰‹åŠ¨å†™ä¸ª Demoï¼Œä½ ä¼šå‘ç°åŸæ¥åŸç†å°±æ˜¯è¿™ä¹ˆç®€å•ï¼</p>
<hr>
<h3 id="3-3-5-æ€»ç»“"><a href="#3-3-5-æ€»ç»“" class="headerlink" title="3.3.5 æ€»ç»“"></a>3.3.5 æ€»ç»“</h3><p>OKï¼Œåˆåˆ°äº†æµç¨‹å›¾çš„å±•ç°æ—¶å€™äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><center><img src="https://upload-images.jianshu.io/upload_images/3517194-812be931bd432a26.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Viewäº‹ä»¶åˆ†å‘æœºåˆ¶æµç¨‹å›¾.png"></center><br><br></p>
<h1 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; âœ¨&nbsp;1ã€Android äº‹ä»¶åˆ†å‘æœºåˆ¶ä¸»è¦ç”± â€œäº‹ä»¶åˆ†å‘â€ â€”&gt; â€œäº‹ä»¶æ‹¦æˆªâ€ â€”&gt; â€œäº‹ä»¶å“åº”â€ è¿™ä¸‰æ­¥æ¥è¿›è¡Œé€»è¾‘æ§åˆ¶çš„ã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; âœ¨&nbsp;2ã€ViewGroup é»˜è®¤ä¸æ‹¦æˆªä»»ä½•äº‹ä»¶ã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; âœ¨&nbsp;3ã€ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘è¿‡ç¨‹å¦‚ä¸‹ï¼šdispatchTouchEvent â€”&gt; onTouchListener çš„ OnTouch æ–¹æ³• â€”&gt; onTouchEvent â€”&gt; onClickListener çš„ onClick æ–¹æ³•ã€‚ä»è€Œä¹Ÿå¯ä»¥çœ‹å‡º onTouch æ˜¯ä¼˜å…ˆäº onClick æ‰§è¡Œï¼Œäº‹ä»¶ä¼ é€’çš„é¡ºåºæ˜¯å…ˆç»è¿‡ onTouchï¼Œå†ä¼ é€’åˆ° onClickã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; âœ¨&nbsp;4ã€Android ä¸­çš„äº‹ä»¶ onClickã€onLongClickã€onScroll ç­‰ï¼Œéƒ½æ˜¯ç”±å¤šä¸ª Touch äº‹ä»¶ï¼ˆä¸€ä¸ª ACTION_DOWNï¼Œå¤šä¸ª ACTION_MOVEï¼Œä¸€ä¸ª ACTION_UPï¼‰ç»„æˆã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; âœ¨&nbsp;5ã€å­ View å¯ä»¥é€šè¿‡ä½¿ç”¨ getParent().requestDisallowInterceptTouchEvent(true) ï¼Œé˜»æ­¢ ViewGroup å¯¹å…¶ MOVE æˆ– UP äº‹ä»¶è¿›è¡Œæ‹¦æˆªã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; âœ¨&nbsp;6ã€MotionEvent å¯¹è±¡çš„å››ç§çŠ¶æ€ï¼šMotionEvent.ACTION_DOWNï¼šæ‰‹æŒ‡æŒ‰ä¸‹å±å¹•çš„ç¬é—´</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MotionEvent.ACTION_MOVEï¼šæ‰‹æŒ‡åœ¨å±å¹•ä¸Šç§»åŠ¨</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MotionEvent.ACTION_UPï¼šæ‰‹æŒ‡ç¦»å¼€å±å¹•ç¬é—´</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MotionEvent.ACTION_CANCELï¼šå–æ¶ˆæ‰‹åŠ¿</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; âœ¨&nbsp;7ã€ç‚¹å‡»æŸä¸ªæ§ä»¶ï¼Œé¦–å…ˆä¼šå»è°ƒç”¨è¯¥æ§ä»¶æ‰€åœ¨å¸ƒå±€çš„ dispatchTouchEvent æ–¹æ³•ï¼Œç„¶ååœ¨å¸ƒå±€çš„ dispatchTouchEvent æ–¹æ³•ä¸­æ‰¾åˆ°è¢«ç‚¹å‡»çš„ç›¸åº”æ§ä»¶ï¼Œå†å»è°ƒç”¨è¯¥æ§ä»¶çš„ dispatchTouchEventæ–¹æ³•ã€‚</p>
<h1 id="ç´¢å¼•é“¾æ¥"><a href="#ç´¢å¼•é“¾æ¥" class="headerlink" title="ç´¢å¼•é“¾æ¥"></a>ç´¢å¼•é“¾æ¥</h1><p>æ¨èè·³è½¬ï¼š<a href="https://superandroid.pro/2019/01/01/00.%20Thinking%20in%20Android%20--%2001.%20%E5%8D%9A%E5%AE%A2%E7%B4%A2%E5%BC%95/">åšå®¢ç´¢å¼•ï¼ˆAndroid 9.0ï¼‰</a></p>

            </div>
            <hr>

            

            <!--<link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>å¾®ä¿¡é‡Œç‚¹â€œå‘ç°â€->â€œæ‰«ä¸€æ‰«â€äºŒç»´ç ä¾¿å¯æŸ¥çœ‹åˆ†äº«ã€‚</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>-->

            <div class="reprint">
                <p>
                    <span class="reprint-tip">
                        <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;è½¬è½½è¯·æ³¨æ˜:
                    </span>
                    <a href="https://superandroid.pro" class="b-link-green">Hexo</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/2018/09/26/04.he-xin-ji-zhi-xi-lie-shen-ru-yan-jiu-android-he-xin-ji-zhi-zhi-shi-jian-fen-fa/" class="b-link-green">æ·±å…¥é’»ç ” Android æ ¸å¿ƒæœºåˆ¶ ä¹‹ äº‹ä»¶åˆ†å‘</a>
                </p>
            </div>
        </div>
    </div>

    

    

    

    
    <div class="livere-card card" data-aos="fade-up">
    <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
    <div id="lv-container" class="card-content" data-id="city" data-uid="MTAyMC8zNzY5OS8xNDIzMA">
        <script type="text/javascript">
            (function (d, s) {
                let j, e = d.getElementsByTagName(s)[0];
                if (typeof LivereTower === 'function') {
                    return;
                }

                j = d.createElement(s);
                j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                j.async = true;

                e.parentNode.insertBefore(j, e);
            })(document, 'script');
        </script>
        <noscript>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScriptã€‚</noscript>
    </div>
    <!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
</div>
    

    

    <!--

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6 overflow-policy" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;ä¸Šä¸€ç¯‡</div>
            <div class="card">
                <a href="/2018/11/01/04.he-xin-ji-zhi-xi-lie-shen-ru-yan-jiu-android-he-xin-ji-zhu-zhi-lowmemorykiller/">
                    <div class="card-image">
                        
                        <img src="http://poobjb5p7.bkt.clouddn.com/LowmemoryKiller%EF%BC%88%E5%B0%81%E9%9D%A2%EF%BC%89.jpg" class="responsive-img" alt="æ·±å…¥é’»ç ” Android æ ¸å¿ƒæŠ€æœ¯ ä¹‹ LowMemoryKiller">
                        
                        <span class="card-title">æ·±å…¥é’»ç ” Android æ ¸å¿ƒæŠ€æœ¯ ä¹‹ LowMemoryKiller</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">ä¸€ã€æ ¸å¿ƒæºç 


å…³é”®ç±»
è·¯å¾„




lmkd.c
system/core/lmkd/lmkd.c


lmkd.rc
system/core/lmkd/lmkd.rc


lowmemorykiller.c
kernel-3.18/dr</div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2018-11-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/æ ¸å¿ƒæŠ€æœ¯/" class="post-category" target="_blank">
                                    æ ¸å¿ƒæŠ€æœ¯
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/LowMemoryKiller/" target="_blank">
                        <span class="chip bg-color">LowMemoryKiller</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6 overflow-policy" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                ä¸‹ä¸€ç¯‡&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2018/09/13/04.he-xin-ji-zhi-xi-lie-shen-ru-yan-jiu-android-he-xin-ji-zhi-zhi-handler-yuan-li-pian/">
                    <div class="card-image">
                        
                        <img src="http://poobjb5p7.bkt.clouddn.com/Handler%E6%9C%BA%E5%88%B6%EF%BC%88%E5%B0%81%E9%9D%A2%EF%BC%89.jpg" class="responsive-img" alt="æ·±å…¥é’»ç ” Android æ ¸å¿ƒæœºåˆ¶ ä¹‹ Handlerï¼ˆåŸç†ç¯‡ï¼‰">
                        
                        <span class="card-title">æ·±å…¥é’»ç ” Android æ ¸å¿ƒæœºåˆ¶ ä¹‹ Handlerï¼ˆåŸç†ç¯‡ï¼‰</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">1. å¼€ç¯‡1.1 æ ¸å¿ƒæºç 


å…³é”®ç±»
è·¯å¾„




Looper.java
frameworks/base/core/java/android/os/Looper.java


Message.java
frameworks/base/c</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2018-09-13
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/æ ¸å¿ƒæœºåˆ¶/" class="post-category" target="_blank">
                                    æ ¸å¿ƒæœºåˆ¶
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Handler/" target="_blank">
                        <span class="chip bg-color">Handler</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>-->
</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + 'æ¥æº: Hexo<br />'
            + 'ä½œè€…: Marco<br />'
            + 'é“¾æ¥: <a href="' + url + '">' + url + '</a><br />'
            + 'æœ¬æ–‡ç« è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·æ³¨æ˜å‡ºå¤„ã€‚';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. -->


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4, h5'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4, h5').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
    });
</script>
    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
		    &copy; 2018 - 2019&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In-depth analysis of Android system source code &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-graduation-cap" aria-hidden="true"></i>&nbsp;&nbsp;By Marco<br>
            
			
		</div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/pepsimaxin/pepsimaxin.github.io" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:pepsimaxin@163.com" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=516749232" class="tooltipped" data-tooltip="QQè”ç³»æˆ‘: 516749232" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS è®¢é˜…" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;æ£€ç´¢åšæ–‡</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„æŠ€æœ¯å…³é”®å­—" class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
<!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->





</body>
</html>